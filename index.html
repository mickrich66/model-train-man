<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model Train Man - All Things Model Trains</title>
    <style>
        /* ===== BASE STYLES ===== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f0; color: #333; overflow-x: hidden; }
        
        /* ===== REALISTIC FLYING SCOTSMAN CSS MODEL ===== */
        .train-track {
            width: 100%;
            height: 120px;
            background: #222;
            position: relative;
            border-top: 4px solid #444;
            border-bottom: 14px solid #333;
            overflow: hidden;
            margin-bottom: 0;
            display: flex;
            align-items: flex-end;
        }

        /* The Train Container - Moves Left to Right (Forward) */
        .train-container {
            position: absolute;
            bottom: 14px;
            left: -1000px;
            display: flex;
            flex-direction: row;
            align-items: flex-end;
            animation: runForward 25s linear infinite;
        }

        @keyframes runForward {
            0% { left: -1000px; }
            100% { left: 100%; }
        }

        /* Locomotive Body (BR Green) */
        .loco-main {
            display: flex;
            align-items: flex-end;
            position: relative;
        }

        /* Boiler Section */
        .boiler-section {
            width: 180px;
            height: 55px;
            background: #004225; /* British Racing Green */
            border-radius: 30px 5px 2px 2px;
            position: relative;
            border: 2px solid #002b18;
            box-shadow: inset 0 10px 10px rgba(255,255,255,0.15);
            z-index: 10;
        }

        /* Tapered Front (Smokebox) */
        .smokebox {
            width: 40px;
            height: 50px;
            background: #111;
            position: absolute;
            left: -35px;
            bottom: 0;
            border-radius: 15px 0 0 5px;
            border: 1px solid #000;
        }

        /* Smoke Deflectors */
        .deflector {
            width: 15px;
            height: 45px;
            background: #004225;
            position: absolute;
            left: -38px;
            bottom: 5px;
            border: 1px solid #002b18;
            z-index: 15;
            border-radius: 2px;
        }

        /* Banjo Dome */
        .dome {
            width: 25px;
            height: 8px;
            background: #004225;
            position: absolute;
            top: -6px;
            left: 70px;
            border-radius: 10px 10px 0 0;
            border: 1px solid #002b18;
        }

        /* Funnel (Double Chimney) */
        .funnel {
            width: 14px;
            height: 12px;
            background: #111;
            position: absolute;
            top: -10px;
            left: 15px;
            border-radius: 2px;
        }

        /* Smoke Animation */
        .smoke-cloud {
            position: absolute;
            top: -25px;
            left: 15px;
            width: 15px;
            height: 15px;
            background: rgba(220,220,220,0.7);
            border-radius: 50%;
            animation: puffCloud 2s infinite;
        }

        @keyframes puffCloud {
            0% { transform: translateY(0) scale(1); opacity: 0.7; }
            100% { transform: translateY(-60px) scale(6); opacity: 0; }
        }

        /* Cab Section */
        .cab {
            width: 50px;
            height: 60px;
            background: #004225;
            position: absolute;
            right: -45px;
            bottom: 0;
            border: 2px solid #002b18;
            border-radius: 2px 10px 0 0;
            z-index: 11;
        }
        .cab-window {
            width: 15px;
            height: 15px;
            background: #ADD8E6;
            position: absolute;
            top: 10px;
            left: 10px;
            border: 1px solid #002b18;
        }

        /* Gold/Yellow Writing (LNER / 4472) */
        .loco-main::after {
            content: "LNER 4472";
            position: absolute;
            bottom: 12px;
            left: 50px;
            font-size: 12px;
            font-weight: bold;
            color: #FFD700; /* Gold */
            font-family: 'Times New Roman', serif;
            letter-spacing: 1px;
            text-shadow: 1px 1px 1px rgba(0,0,0,0.5);
            z-index: 20;
        }

        /* Wheels - 4-6-2 Arrangement */
        .wheel {
            background: #111;
            border: 4px solid #444;
            border-radius: 50%;
            position: absolute;
            animation: rotateWheel 0.5s linear infinite;
            z-index: 5;
        }
        @keyframes rotateWheel {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Leading Wheels (4) */
        .lead-wheel { width: 18px; height: 18px; bottom: -10px; }
        .lw1 { left: -25px; }
        .lw2 { left: -5px; }

        /* Driving Wheels (6) */
        .drive-wheel { width: 35px; height: 35px; bottom: -18px; border-width: 6px; }
        .dw1 { left: 25px; }
        .dw2 { left: 65px; }
        .dw3 { left: 105px; }

        /* Trailing Wheel (2) */
        .trail-wheel { width: 20px; height: 20px; bottom: -11px; left: 155px; }

        /* Tender (Coal Car) */
        .tender {
            width: 110px;
            height: 45px;
            background: #004225;
            margin-left: 50px; /* Space for cab */
            border-radius: 2px;
            position: relative;
            border: 2px solid #002b18;
            z-index: 10;
        }
        .tender::before {
            content: "";
            position: absolute;
            top: -10px;
            left: 5px;
            width: 100px;
            height: 15px;
            background: #111; /* Coal */
            border-radius: 8px 8px 0 0;
        }
        .tender::after {
            content: "LNER";
            position: absolute;
            top: 12px;
            left: 30px;
            font-size: 14px;
            font-weight: bold;
            color: #FFD700;
            font-family: 'Times New Roman', serif;
        }
        .tender-wheel { width: 18px; height: 18px; bottom: -10px; }
        .tw1 { left: 10px; }
        .tw2 { left: 35px; }
        .tw3 { left: 60px; }
        .tw4 { left: 85px; }

        /* Coaches */
        .coach {
            width: 150px;
            height: 48px;
            background: #8B4513; /* Teak/Brown LNER Coaches */
            margin-left: 5px;
            border-radius: 2px;
            position: relative;
            border: 2px solid #5D2E0C;
            display: flex;
            justify-content: space-around;
            padding-top: 12px;
            z-index: 10;
        }
        .window {
            width: 22px;
            height: 18px;
            background: #ADD8E6;
            border: 1px solid #5D2E0C;
        }
        .coach-wheel { width: 18px; height: 18px; bottom: -10px; }
        .cw1 { left: 20px; }
        .cw2 { left: 110px; }

        /* ===== TOP NAVIGATION ===== */
        .topnav {
            background: #004D33;
            padding: 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            text-align: center;
        }
        .topnav button {
            background: none;
            border: none;
            color: white;
            padding: 15px 15px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }
        .topnav button:hover { background: #006633; }
        .topnav button.active { background: #FFD700; color: #004D33; }

        /* ===== PAGE SECTIONS ===== */
        .page { display: none; padding: 20px; }
        .page.active { display: block; }

        /* ===== HERO BANNER ===== */
        .hero {
            background: linear-gradient(135deg, #004D33, #006633);
            color: white;
            text-align: center;
            padding: 50px 20px;
        }
        .hero h1 { font-size: 40px; color: #FFD700; margin-bottom: 10px; }
        
        /* ===== AD BOARD ===== */
        .ad-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            max-width: 1000px;
            margin: 20px auto;
        }
        .ad-box {
            background: white;
            border: 2px dashed #ccc;
            padding: 20px;
            text-align: center;
            border-radius: 10px;
        }
        .ad-box.taken {
            border: 2px solid #004D33;
            background: #e8f5e8;
        }

        /* ===== FORMS ===== */
        .form-box {
            max-width: 500px;
            margin: 20px auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        input, select, textarea {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .btn {
            background: #004D33;
            color: white;
            padding: 12px 20px;
            border: none;
            cursor: pointer;
            width: 100%;
            font-size: 18px;
            font-weight: bold;
            border-radius: 5px;
        }
        .btn:hover { background: #006633; }
        .btn:disabled { background: #ccc; cursor: not-allowed; }

        /* ===== FOOTER ===== */
        .footer {
            background: #004D33;
            color: white;
            text-align: center;
            padding: 20px;
            margin-top: 50px;
        }

        /* Result Message Styles */
        #result-message, #contact-result-message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            display: none;
            text-align: center;
        }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    </style>
</head>
<body>

<!-- REALISTIC TRAIN ANIMATION TRACK -->
<div class="train-track">
    <div class="train-container">
        <!-- Locomotive (Engine) -->
        <div class="loco-main">
            <div class="smokebox">
                <div class="funnel"></div>
                <div class="smoke-cloud"></div>
            </div>
            <div class="deflector"></div>
            <div class="boiler-section">
                <div class="dome"></div>
            </div>
            <div class="cab">
                <div class="cab-window"></div>
            </div>
            <!-- Wheels 4-6-2 -->
            <div class="wheel lead-wheel lw1"></div>
            <div class="wheel lead-wheel lw2"></div>
            <div class="wheel drive-wheel dw1"></div>
            <div class="wheel drive-wheel dw2"></div>
            <div class="wheel drive-wheel dw3"></div>
            <div class="wheel trail-wheel"></div>
        </div>
        <!-- Tender -->
        <div class="tender">
            <div class="wheel tender-wheel tw1"></div>
            <div class="wheel tender-wheel tw2"></div>
            <div class="wheel tender-wheel tw3"></div>
            <div class="wheel tender-wheel tw4"></div>
        </div>
        <!-- Coaches -->
        <div class="coach">
            <div class="window"></div><div class="window"></div><div class="window"></div><div class="window"></div>
            <div class="wheel coach-wheel cw1"></div>
            <div class="wheel coach-wheel cw2"></div>
        </div>
        <div class="coach">
            <div class="window"></div><div class="window"></div><div class="window"></div><div class="window"></div>
            <div class="wheel coach-wheel cw1"></div>
            <div class="wheel coach-wheel cw2"></div>
        </div>
    </div>
</div>

<!-- NAVIGATION MENU -->
<div class="topnav">
    <button onclick="showPage('home')" class="active">üè† Home</button>
    <button onclick="showPage('finder')">üöÇ Train Finder</button>
    <button onclick="showPage('adboard')">üì¢ Ad Board</button>
    <button onclick="showPage('contact')">‚úâÔ∏è Contact</button>
</div>

<!-- ================= HOME PAGE ================= -->
<div id="home" class="page active">
    <div class="hero">
        <h1>Model Train Man</h1>
        <p>Your Ultimate Resource for Model Trains & Layouts</p>
    </div>
    
    <div style="max-width:800px; margin:40px auto; text-align:center;">
        <h2>Welcome to the Community</h2>
        <p>Use the buttons above to find train details, book an ad slot, or contact us.</p>
        <br>
        <button class="btn" style="width:auto;" onclick="showPage('finder')">Start Searching Trains</button>
    </div>
</div>

<!-- ================= TRAIN FINDER PAGE ================= -->
<div id="finder" class="page">
    <div class="hero">
        <h1>Train Finder</h1>
        <p>Identify your Hornby Models (1960s - Present)</p>
    </div>
    <div class="form-box">
        <h3>Search Database</h3>
        <input type="text" id="trainSearch" placeholder="Enter R-Number (e.g. R050)">
        <button class="btn" onclick="findTrain()">Search</button>
        
        <div id="trainResult" style="display:none; margin-top:20px; border-top:1px solid #ccc; padding-top:20px;">
            <h2 id="t-name" style="color:#004D33;"></h2>
            <p><strong>Category:</strong> <span id="t-cat"></span></p>
            <p><strong>Year:</strong> <span id="t-year"></span></p>
            <p><strong>Value:</strong> <span id="t-val"></span></p>
            <p id="t-desc"></p>
            <br>
            <button class="btn" style="background:#d32f2f;" onclick="searchEbay()">Search on eBay</button>
        </div>
    </div>
</div>

<!-- ================= AD BOARD PAGE ================= -->
<div id="adboard" class="page">
    <div class="hero">
        <h1>Community Ad Board</h1>
        <p>Advertise here for just ¬£5 per week!</p>
    </div>

    <!-- THE AD GRID -->
    <div class="ad-grid">
        <!-- Slot 1 -->
        <div class="ad-box">
            <h3>Slot 1</h3>
            <p>Available</p>
            <button class="btn" style="width:auto; font-size:12px; margin-top:10px;" onclick="scrollToBook(1)">Book This Slot</button>
        </div>
        <!-- Slot 2 -->
        <div class="ad-box">
            <h3>Slot 2</h3>
            <p>Available</p>
            <button class="btn" style="width:auto; font-size:12px; margin-top:10px;" onclick="scrollToBook(2)">Book This Slot</button>
        </div>
        <!-- Slot 3 -->
        <div class="ad-box">
            <h3>Slot 3</h3>
            <p>Available</p>
            <button class="btn" style="width:auto; font-size:12px; margin-top:10px;" onclick="scrollToBook(3)">Book This Slot</button>
        </div>
        <!-- Slot 4 -->
        <div class="ad-box">
            <h3>Slot 4</h3>
            <p>Available</p>
            <button class="btn" style="width:auto; font-size:12px; margin-top:10px;" onclick="scrollToBook(4)">Book This Slot</button>
        </div>
        <!-- Slot 5 -->
        <div class="ad-box">
            <h3>Slot 5</h3>
            <p>Available</p>
            <button class="btn" style="width:auto; font-size:12px; margin-top:10px;" onclick="scrollToBook(5)">Book This Slot</button>
        </div>
        <!-- Slot 6 -->
        <div class="ad-box">
            <h3>Slot 6</h3>
            <p>Available</p>
            <button class="btn" style="width:auto; font-size:12px; margin-top:10px;" onclick="scrollToBook(6)">Book This Slot</button>
        </div>
        <!-- Slot 7 -->
        <div class="ad-box">
            <h3>Slot 7</h3>
            <p>Available</p>
            <button class="btn" style="width:auto; font-size:12px; margin-top:10px;" onclick="scrollToBook(7)">Book This Slot</button>
        </div>
        <!-- Slot 8 -->
        <div class="ad-box">
            <h3>Slot 8</h3>
            <p>Available</p>
            <button class="btn" style="width:auto; font-size:12px; margin-top:10px;" onclick="scrollToBook(8)">Book This Slot</button>
        </div>
        <!-- Slot 9 -->
        <div class="ad-box">
            <h3>Slot 9</h3>
            <p>Available</p>
            <button class="btn" style="width:auto; font-size:12px; margin-top:10px;" onclick="scrollToBook(9)">Book This Slot</button>
        </div>
        <!-- Slot 10 -->
        <div class="ad-box">
            <h3>Slot 10</h3>
            <p>Available</p>
            <button class="btn" style="width:auto; font-size:12px; margin-top:10px;" onclick="scrollToBook(10)">Book This Slot</button>
        </div>
        <!-- Slot 11 -->
        <div class="ad-box">
            <h3>Slot 11</h3>
            <p>Available</p>
            <button class="btn" style="width:auto; font-size:12px; margin-top:10px;" onclick="scrollToBook(11)">Book This Slot</button>
        </div>
        <!-- Slot 12 -->
        <div class="ad-box">
            <h3>Slot 12</h3>
            <p>Available</p>
            <button class="btn" style="width:auto; font-size:12px; margin-top:10px;" onclick="scrollToBook(12)">Book This Slot</button>
        </div>
    </div>

    <!-- BOOKING FORM -->
    <div id="bookingForm" class="form-box">
        <h2 style="text-align:center; color:#004D33;">Book Your Ad</h2>
        <p style="text-align:center; margin-bottom:20px;">Fill this in, then pay via PayPal.</p>
        
        <form id="adBookingForm">
            <input type="hidden" name="access_key" value="b0c4df94-e5b9-4f2e-9e9c-bb020441aff4">
            <input type="hidden" name="subject" value="New Ad Booking">
            <input type="hidden" name="from_name" value="Model Train Man Website">

            <label>Name</label>
            <input type="text" name="name" required>

            <label>Email</label>
            <input type="email" name="email" required>

            <label>Which Slot Number?</label>
            <select name="slot_number" id="slotSelect">
                <option value="1">Slot 1</option><option value="2">Slot 2</option><option value="3">Slot 3</option>
                <option value="4">Slot 4</option><option value="5">Slot 5</option><option value="6">Slot 6</option>
                <option value="7">Slot 7</option><option value="8">Slot 8</option><option value="9">Slot 9</option>
                <option value="10">Slot 10</option><option value="11">Slot 11</option><option value="12">Slot 12</option>
            </select>

            <label>Ad Text / Message</label>
            <textarea name="message" rows="4" required placeholder="Type your ad text here..."></textarea>

            <button type="submit" id="submitBtn" class="btn">Submit & Pay ¬£5</button>
            <div id="result-message"></div>
        </form>
    </div>
</div>

<!-- ================= CONTACT PAGE ================= -->
<div id="contact" class="page">
    <div class="hero">
        <h1>Contact Us</h1>
    </div>
    <div class="form-box">
        <form id="contactForm">
            <input type="hidden" name="access_key" value="b0c4df94-e5b9-4f2e-9e9c-bb020441aff4">
            <input type="hidden" name="subject" value="New Contact Message">
            <input type="hidden" name="from_name" value="Model Train Man Website">
            
            <label>Name</label>
            <input type="text" name="name" required>

            <label>Email</label>
            <input type="email" name="email" required>

            <label>Message</label>
            <textarea name="message" rows="5" required></textarea>

            <button type="submit" id="contactSubmitBtn" class="btn">Send Message</button>
            <div id="contact-result-message"></div>
        </form>
    </div>
</div>

<div class="footer">
    <p>&copy; 2025 Model Train Man</p>
</div>

<script>
    // Simple Navigation Script
    function showPage(pageId) {
        document.querySelectorAll('.page').forEach(div => div.classList.remove('active'));
        document.getElementById(pageId).classList.add('active');
        window.scrollTo(0,0);
    }

    function scrollToBook(slotNum) {
        document.getElementById('slotSelect').value = slotNum;
        document.getElementById('bookingForm').scrollIntoView({ behavior: 'smooth' });
    }

    // Train Finder Data & Logic
    const trains = [
        {id:"R050", name:"Flying Scotsman", cat:"Steam", val:"¬£150", year:"1968", desc:"Classic BR Green"},
        {id:"R250", name:"BR Class 47", cat:"Diesel", val:"¬£135", year:"1980", desc:"Blue Livery"},
        {id:"R1041", name:"Mallard", cat:"Steam", val:"¬£250", year:"2004", desc:"Speed Record Holder"},
        {id:"R550", name:"BR Freight Set", cat:"Set", val:"¬£200", year:"1975", desc:"Starter Freight Set"}
    ];

    let currentTrain = null;

    function findTrain() {
        const input = document.getElementById('trainSearch').value.toUpperCase();
        const found = trains.find(t => t.id === input);
        
        if(found) {
            currentTrain = found;
            document.getElementById('t-name').innerText = found.name;
            document.getElementById('t-cat').innerText = found.cat;
            document.getElementById('t-year').innerText = found.year;
            document.getElementById('t-val').innerText = found.val;
            document.getElementById('t-desc').innerText = found.desc;
            document.getElementById('trainResult').style.display = 'block';
        } else {
            alert("Train not found! Try R050, R250, or R1041 as examples.");
        }
    }

    function searchEbay() {
        if(currentTrain) {
            window.open("https://www.ebay.co.uk/sch/i.html?_nkw=Hornby+" + currentTrain.name, "_blank");
        }
    }

    // --- AUTOMATION FIXES ---

    async function handleFormSubmit(form, resultElement, submitButton, redirectUrl = null) {
        submitButton.disabled = true;
        submitButton.innerText = "Processing...";
        resultElement.style.display = "none";

        const formData = new FormData(form);
        const object = Object.fromEntries(formData);
        const json = JSON.stringify(object);

        try {
            const response = await fetch('https://api.web3forms.com/submit', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                },
                body: json
            });

            const res = await response.json();
            if (response.status === 200) {
                resultElement.innerHTML = redirectUrl ? "Booking sent! Redirecting to PayPal..." : "Message sent successfully!";
                resultElement.className = "success";
                resultElement.style.display = "block";
                
                if (redirectUrl) {
                    setTimeout(() => {
                        window.location.href = redirectUrl;
                    }, 1500);
                } else {
                    form.reset();
                }
            } else {
                resultElement.innerHTML = res.message || "Submission failed!";
                resultElement.className = "error";
                resultElement.style.display = "block";
            }
        } catch (error) {
            resultElement.innerHTML = "Something went wrong! Please check your internet connection.";
            resultElement.className = "error";
            resultElement.style.display = "block";
        } finally {
            if (!redirectUrl || resultElement.className === "error") {
                submitButton.disabled = false;
                submitButton.innerText = redirectUrl ? "Submit & Pay ¬£5" : "Send Message";
            }
        }
    }

    // Ad Booking Form
    const adForm = document.getElementById('adBookingForm');
    adForm.addEventListener('submit', (e) => {
        e.preventDefault();
        handleFormSubmit(adForm, document.getElementById('result-message'), document.getElementById('submitBtn'), "https://www.paypal.com/ncp/payment/2S49PPAHGXK46");
    });

    // Contact Form
    const contactForm = document.getElementById('contactForm');
    contactForm.addEventListener('submit', (e) => {
        e.preventDefault();
        handleFormSubmit(contactForm, document.getElementById('contact-result-message'), document.getElementById('contactSubmitBtn'));
    });
</script>

</body>
</html>
